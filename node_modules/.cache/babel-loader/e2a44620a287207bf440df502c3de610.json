{"ast":null,"code":"import React, { useEffect } from 'react';\nimport useFetch from 'hooks/useFetch';\nimport { CurrentUserContext } from 'contexts/currentUser';\nimport useLocalStorage from 'hooks/useLocalStorage';\n\nconst CurrentUserCheker = ({\n  children\n}) => {\n  const [{\n    response\n  }, doFetch] = useFetch('/user');\n  const [, setCurrentUserState] = useContext(CurrentUserContext);\n  const [token] = useLocalStorage('token');\n  useEffect(() => {\n    console.log('initUseeefectCheker');\n    doFetch();\n    setCurrentUserState(state => ({ ...state,\n      isLoading: true\n    }));\n  }, []);\n  useEffect(() => {\n    if (!response) {\n      return;\n    }\n\n    setCurrentUserState(state => ({ ...state,\n      isLoggedIn: true,\n      isLoading: false,\n      currentUser: response.user\n    }));\n  }, [response]);\n  return children;\n};\n\nexport default CurrentUserCheker;","map":{"version":3,"sources":["C:/Users/yurBoy/Desktop/bobNode/hook-app/medium_clone/src/node_modules/components/currentUserCheker.js"],"names":["React","useEffect","useFetch","CurrentUserContext","useLocalStorage","CurrentUserCheker","children","response","doFetch","setCurrentUserState","useContext","token","console","log","state","isLoading","isLoggedIn","currentUser","user"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,QAAP,MAAqB,gBAArB;AACA,SAAQC,kBAAR,QAAiC,sBAAjC;AACA,OAAOC,eAAP,MAA4B,uBAA5B;;AAEA,MAAMC,iBAAiB,GAAC,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAc;AAClC,QAAM,CAAC;AAACC,IAAAA;AAAD,GAAD,EAAaC,OAAb,IAAwBN,QAAQ,CAAC,OAAD,CAAtC;AACA,QAAM,GAAGO,mBAAH,IAA0BC,UAAU,CAACP,kBAAD,CAA1C;AACA,QAAM,CAACQ,KAAD,IAAUP,eAAe,CAAC,OAAD,CAA/B;AAEAH,EAAAA,SAAS,CAAC,MAAI;AACVW,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAL,IAAAA,OAAO;AACPC,IAAAA,mBAAmB,CAACK,KAAK,KAAK,EAC1B,GAAIA,KADsB;AAE1BC,MAAAA,SAAS,EAAE;AAFe,KAAL,CAAN,CAAnB;AAIH,GAPQ,EAOP,EAPO,CAAT;AASAd,EAAAA,SAAS,CAAC,MAAI;AACV,QAAG,CAACM,QAAJ,EAAa;AACT;AACH;;AACDE,IAAAA,mBAAmB,CAACK,KAAK,KAAK,EAC1B,GAAGA,KADuB;AAE1BE,MAAAA,UAAU,EAAE,IAFc;AAG1BD,MAAAA,SAAS,EAAE,KAHe;AAI1BE,MAAAA,WAAW,EAAEV,QAAQ,CAACW;AAJI,KAAL,CAAN,CAAnB;AAMH,GAVQ,EAUN,CAACX,QAAD,CAVM,CAAT;AAWA,SAAOD,QAAP;AACH,CA1BD;;AA4BA,eAAeD,iBAAf","sourcesContent":["import React, { useEffect } from 'react'\r\n\r\nimport useFetch from 'hooks/useFetch'\r\nimport {CurrentUserContext} from 'contexts/currentUser'\r\nimport useLocalStorage from 'hooks/useLocalStorage'\r\n\r\nconst CurrentUserCheker=({children})=>{\r\n    const [{response}, doFetch] = useFetch('/user')\r\n    const [, setCurrentUserState] = useContext(CurrentUserContext)\r\n    const [token] = useLocalStorage('token')\r\n    \r\n    useEffect(()=>{\r\n        console.log('initUseeefectCheker')\r\n        doFetch()\r\n        setCurrentUserState(state => ({\r\n            ... state,\r\n            isLoading: true\r\n        }))\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        if(!response){\r\n            return\r\n        }\r\n        setCurrentUserState(state => ({\r\n            ...state,\r\n            isLoggedIn: true,\r\n            isLoading: false,\r\n            currentUser: response.user\r\n        }))\r\n    }, [response])\r\n    return children\r\n}\r\n\r\nexport default CurrentUserCheker"]},"metadata":{},"sourceType":"module"}